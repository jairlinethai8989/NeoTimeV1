# üöÄ Gravity Time Attendance System

‡∏£‡∏∞‡∏ö‡∏ö‡∏•‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤-‡∏≠‡∏≠‡∏Å‡∏á‡∏≤‡∏ô ‡∏û‡∏£‡πâ‡∏≠‡∏° GPS, Camera ‡πÅ‡∏•‡∏∞ LINE Notification

## üìã Features

### üë§ Employee View (‡∏•‡∏á‡πÄ‡∏ß‡∏•‡∏≤)
- ‚úÖ ‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡∏∞‡∏ä‡∏∑‡πà‡∏≠ (‡∏à‡∏≥‡∏Ñ‡πà‡∏≤‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥)
- üì∏ ‡∏ñ‡πà‡∏≤‡∏¢‡∏†‡∏≤‡∏û‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô (‡∏™‡∏•‡∏±‡∏ö‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏´‡∏ô‡πâ‡∏≤/‡∏´‡∏•‡∏±‡∏á‡πÑ‡∏î‡πâ)
- üìç ‡∏£‡∏∞‡∏ö‡∏∏‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á GPS ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ ‡∏û‡∏£‡πâ‡∏≠‡∏° error handling
- üü¢ Check-in / üî¥ Check-out ‡∏î‡πâ‡∏ß‡∏¢‡∏õ‡∏∏‡πà‡∏°‡∏Ç‡∏ô‡∏≤‡∏î‡πÉ‡∏´‡∏ç‡πà (mobile-friendly)
- üìù ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏‡πÑ‡∏î‡πâ

### üìä Admin Dashboard
- üìà ‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ (‡∏£‡∏ß‡∏°, ‡∏ï‡∏£‡∏á‡πÄ‡∏ß‡∏•‡∏≤, ‡∏™‡∏≤‡∏¢, ‡∏ô‡∏≠‡∏Å‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà)
- üîç ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤/‡∏Å‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏î‡πâ‡∏ï‡∏≤‡∏°‡∏ä‡∏∑‡πà‡∏≠, ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà, ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞
- üè∑Ô∏è Status Badges (‡∏ï‡∏£‡∏á‡πÄ‡∏ß‡∏•‡∏≤=‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß, ‡∏™‡∏≤‡∏¢=‡πÅ‡∏î‡∏á, ‡∏Å‡∏•‡∏±‡∏ö‡∏Å‡πà‡∏≠‡∏ô=‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á)
- üì± Responsive design ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏ó‡∏±‡πâ‡∏á Desktop ‡πÅ‡∏•‡∏∞ Mobile

### ‚öôÔ∏è Backend Logic
- ‚è∞ **‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥**: ‡∏™‡∏≤‡∏¢ (‡∏´‡∏•‡∏±‡∏á 08:15), ‡∏ï‡∏£‡∏á‡πÄ‡∏ß‡∏•‡∏≤, ‡∏Å‡∏•‡∏±‡∏ö‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏ß‡∏•‡∏≤
- üìè **Geofencing**: ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á‡∏à‡∏≤‡∏Å‡∏≠‡∏≠‡∏ü‡∏ü‡∏¥‡∏® (Haversine formula)
- üìÅ **‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û**: ‡∏à‡∏±‡∏î‡πÄ‡∏Å‡πá‡∏ö‡πÉ‡∏ô Google Drive ‡πÅ‡∏¢‡∏Å‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏ï‡∏≤‡∏° Year-Month
- üì§ **LINE Notify**: ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏™‡∏≤‡∏¢/‡∏ô‡∏≠‡∏Å‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà
- ü§ñ **LINE Messaging API**: Webhook ‡∏£‡∏±‡∏ö‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á (Check Status, !setup, !help)

---

## üõ†Ô∏è Setup Instructions

### 1. ‡∏™‡∏£‡πâ‡∏≤‡∏á Google Sheet

1. ‡πÑ‡∏õ‡∏ó‡∏µ‡πà [Google Sheets](https://sheets.google.com) ‡∏™‡∏£‡πâ‡∏≤‡∏á Spreadsheet ‡πÉ‡∏´‡∏°‡πà
2. ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å **Sheet ID** ‡∏à‡∏≤‡∏Å URL: `https://docs.google.com/spreadsheets/d/[SHEET_ID]/edit`
3. ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á Sheet/Headers ‡πÄ‡∏≠‡∏á ‚Äî ‡∏£‡∏±‡∏ô‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô `initializeSheet()` ‡πÉ‡∏ô Code.gs ‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢

### 2. ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå Google Drive

1. ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡πÉ‡∏ô Google Drive ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏Å‡πá‡∏ö‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û
2. ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å **Folder ID** ‡∏à‡∏≤‡∏Å URL: `https://drive.google.com/drive/folders/[FOLDER_ID]`

### 3. ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Google Apps Script

1. ‡πÑ‡∏õ‡∏ó‡∏µ‡πà [Google Apps Script](https://script.google.com) ‡∏™‡∏£‡πâ‡∏≤‡∏á Project ‡πÉ‡∏´‡∏°‡πà
2. ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å `Code.gs` ‡πÑ‡∏õ‡∏ß‡∏≤‡∏á‡πÉ‡∏ô‡πÑ‡∏ü‡∏•‡πå `Code.gs`
3. ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå HTML ‡πÉ‡∏´‡∏°‡πà‡∏ä‡∏∑‡πà‡∏≠ `Index` ‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å `Index.html` ‡πÑ‡∏õ‡∏ß‡∏≤‡∏á
4. ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç Constants ‡πÉ‡∏ô `Code.gs`:

```javascript
const SHEET_ID = 'YOUR_SHEET_ID';           // Sheet ID ‡∏à‡∏≤‡∏Å‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 1
const IMAGE_FOLDER_ID = 'YOUR_FOLDER_ID';   // Folder ID ‡∏à‡∏≤‡∏Å‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 2
const OFFICE_LAT = 13.7563;                 // ‡∏•‡∏∞‡∏ï‡∏¥‡∏à‡∏π‡∏î‡∏Ç‡∏≠‡∏á‡∏≠‡∏≠‡∏ü‡∏ü‡∏¥‡∏®
const OFFICE_LNG = 100.5018;                // ‡∏•‡∏≠‡∏á‡∏à‡∏¥‡∏à‡∏π‡∏î‡∏Ç‡∏≠‡∏á‡∏≠‡∏≠‡∏ü‡∏ü‡∏¥‡∏®
```

5. ‡∏£‡∏±‡∏ô `initializeSheet()` ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á Headers ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥

### 4. Deploy ‡πÄ‡∏õ‡πá‡∏ô Web App

1. ‡∏Ñ‡∏•‡∏¥‡∏Å **Deploy > New deployment**
2. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Type: **Web app**
3. Execute as: **Me**
4. Who has access: **Anyone** (‡∏´‡∏£‡∏∑‡∏≠ Anyone with Google account)
5. ‡∏Ñ‡∏•‡∏¥‡∏Å **Deploy** ‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å URL

### 5. ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ LINE (Optional)

#### LINE Notify
1. ‡πÑ‡∏õ‡∏ó‡∏µ‡πà [LINE Notify](https://notify-bot.line.me/my/)
2. ‡∏™‡∏£‡πâ‡∏≤‡∏á Token ‡πÉ‡∏´‡∏°‡πà
3. ‡πÉ‡∏™‡πà Token ‡πÉ‡∏ô `Code.gs` ‡∏ó‡∏µ‡πà `LINE_NOTIFY_TOKEN`

#### LINE Messaging API
1. ‡∏™‡∏£‡πâ‡∏≤‡∏á Channel ‡∏ó‡∏µ‡πà [LINE Developers](https://developers.line.me/)
2. ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å Channel Access Token ‡πÉ‡∏™‡πà‡πÉ‡∏ô `LINE_CHANNEL_ACCESS_TOKEN`
3. Add Bot ‡πÄ‡∏Ç‡πâ‡∏≤‡∏Å‡∏•‡∏∏‡πà‡∏° LINE ‡πÅ‡∏•‡πâ‡∏ß‡∏û‡∏¥‡∏°‡∏û‡πå `!setup` ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏±‡∏ö Group ID
4. ‡πÉ‡∏™‡πà Group ID ‡πÉ‡∏ô `TARGET_GROUP_ID`
5. ‡∏ï‡∏±‡πâ‡∏á Webhook URL ‡πÄ‡∏õ‡πá‡∏ô Web App URL ‡∏à‡∏≤‡∏Å‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 4

---

## üìÅ File Structure

```
Time attendence gravity v1/
‚îú‚îÄ‚îÄ Code.gs      # Google Apps Script Backend
‚îú‚îÄ‚îÄ Index.html   # Frontend (Admin + Employee views)
‚îî‚îÄ‚îÄ README.md    # Documentation (you are here)
```

## üìä Google Sheet Structure

### Sheet: "Attendance"
| Column | Field           | Example              |
|--------|-----------------|----------------------|
| A      | Timestamp       | 2026-02-21 08:15:30  |
| B      | Date            | 2026-02-21           |
| C      | Time            | 08:15:30             |
| D      | Employee ID     | EMP001               |
| E      | Employee Name   | ‡∏™‡∏°‡∏ä‡∏≤‡∏¢ ‡∏î‡∏µ‡πÄ‡∏î‡πà‡∏ô         |
| F      | Type            | Check-in             |
| G      | Status          | Normal / Late        |
| H      | Latitude        | 13.756300            |
| I      | Longitude       | 100.501800           |
| J      | Location Status | In Range             |
| K      | Distance (km)   | 0.150                |
| L      | Image URL       | https://drive...      |
| M      | Note            | -                    |

### Sheet: "Employees"
| Column | Field           | Example        |
|--------|-----------------|----------------|
| A      | Employee ID     | EMP001         |
| B      | Employee Name   | ‡∏™‡∏°‡∏ä‡∏≤‡∏¢ ‡∏î‡∏µ‡πÄ‡∏î‡πà‡∏ô  |
| C      | Department      | IT             |

---

## ‚öôÔ∏è Configuration

| Parameter              | Default       | Description                    |
|------------------------|---------------|--------------------------------|
| `SHIFT_START_TIME`     | `08:00`       | ‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏á‡∏≤‡∏ô                    |
| `LATE_THRESHOLD_MINUTES` | `15`        | ‡∏ô‡∏≤‡∏ó‡∏µ‡∏´‡∏•‡∏±‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏ñ‡∏∑‡∏≠‡∏ß‡πà‡∏≤‡∏™‡∏≤‡∏¢      |
| `SHIFT_END_TIME`       | `17:00`       | ‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏•‡∏¥‡∏Å‡∏á‡∏≤‡∏ô                    |
| `MAX_DISTANCE_KM`      | `0.5`         | ‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î (km) ‡∏ó‡∏µ‡πà‡∏ñ‡∏∑‡∏≠‡∏ß‡πà‡∏≤‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà |

---

## ü§ñ LINE Bot Commands

| Command         | Description                     |
|-----------------|--------------------------------|
| `Check Status`  | ‡∏î‡∏π‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏•‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î             |
| `‡πÄ‡∏ä‡πá‡∏Ñ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞`     | ‡∏î‡∏π‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏•‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î (‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢)   |
| `!setup`        | ‡πÅ‡∏™‡∏î‡∏á Group ID (‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡∏Å‡∏•‡∏∏‡πà‡∏°)      |
| `!help`         | ‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î               |
